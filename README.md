# QuickMap – AI Study Roadmaps (Node.js + React + Supabase)

QuickMap is a full-stack web app that lets users generate AI-assisted study plans, manage milestones and steps, and browse/bookmark public plans. It uses Supabase for authentication & data, OpenAI for roadmap generation, and a React frontend with TailwindCSS.

## 1) Working Web Application

- Frontend: React (CRA) + react-router-dom + TailwindCSS. Fully responsive layouts and components.
- Backend: Node.js (Express) API server.
- Database: Supabase Postgres. Schema includes `study_plans`, `plan_milestones`, `milestone_steps`, `step_resources`, `bookmarks`, `plan_progress`.
- External APIs: OpenAI Chat Completions for roadmap generation.

# Key tables:

- study_plans

- plan_milestones

- milestone_steps

- step_resources

- bookmarks

- plan_progress

## Database Tables & Relationships

Below is the core relational model used to store plans and user interactions.

- study_plans

  - Purpose: Root entity representing a user's study roadmap generated by AI or created manually.
  - Key fields: `id (uuid)`, `user_id (uuid)`, `title`, `focus`, `outcome`, `estimated_duration_weeks`, `created_at`.
  - Relations:
    - One‑to‑many with `plan_milestones` via `plan_milestones.plan_id`.
    - Referenced by `bookmarks.plan_id` and `plan_progress.plan_id`.

- plan_milestones

  - Purpose: Milestones within a plan, providing major phases or modules of study.
  - Key fields: `id`, `plan_id`, `title`, `description`, `estimated_duration`, `order_index`.
  - Relations:
    - Many‑to‑one to `study_plans` via `plan_id`.
    - One‑to‑many with `milestone_steps` via `milestone_steps.milestone_id`.

- milestone_steps

  - Purpose: Actionable steps under a milestone.
  - Key fields: `id`, `milestone_id`, `title`, `description`, `order_index`.
  - Relations:
    - Many‑to‑one to `plan_milestones` via `milestone_id`.
    - One‑to‑many with `step_resources` via `step_resources.step_id`.

- step_resources

  - Purpose: Learning resources attached to a step.
  - Key fields: `id`, `step_id`, `type (link|video|book)`, `title`, `url`, `order_index`.
  - Relations:
    - Many‑to‑one to `milestone_steps` via `step_id`.

- bookmarks

  - Purpose: Users bookmarking public plans for quick access.
  - Key fields: `user_id`, `plan_id`, `created_at`.
  - Relations:
    - Many‑to‑one to `study_plans` via `plan_id`.
    - Many‑to‑one to `auth.users`/user via `user_id` (managed by Supabase auth).
    - Composite uniqueness on `(user_id, plan_id)`.

- plan_progress
  - Purpose: Per‑user completion tracking for each milestone in a plan.
  - Key fields: `user_id`, `plan_id`, `milestone_id`, `completed (bool)`.
  - Relations:
    - Many‑to‑one to `study_plans` via `plan_id`.
    - Many‑to‑one to `plan_milestones` via `milestone_id`.
    - Many‑to‑one to user via `user_id`.
    - Composite uniqueness on `(user_id, plan_id, milestone_id)`.

### Local Setup

Backend (.env in `backend/`):

```
SUPABASE_URL=your_supabase_project_url
SUPABASE_KEY=your_supabase_anon_key
PORT=3001
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
OPENAI_API_KEY=your_openai_key
OPENAI_MODEL=gpt-4.1-nano-2025-04-14
```

Install & run backend:

```
cd backend
npm install
npm run dev
```

Frontend (.env in `frontend/`):

```
REACT_APP_API_URL=http://localhost:3001
```

Install & run frontend:

```
cd frontend
npm install
npm start
```

Seed/Schema: see `backend/supabase_schema_additions.sql`.

### Main Screens

- `/` Landing (redirects to `/dashboard` if authenticated)
- `/login` Login
- `/register` Register (prompts to verify email after sign‑up)
- `/dashboard` Private: latest plan overview
- `/create` Private: generate a new plan (AI)
- `/plans/:id` Private: plan detail with milestones/steps/resources
- `/public` Private: browse public plans
- `/public/plans/:id` Private: read‑only public plan detail
- `/bookmarks` Private: user’s bookmarked plans

## 2) API Documentation & Architecture Analysis (2–3 pages)

### Technology Stack Justification

- Frontend framework: React becase I am familiar with it, as I have past experiences during the KADA program. React also offers reusable components and TailwindCSS that speeds up responsive UI design.
- Backend: Express (Node.js) keeps the same language across stack, simple middleware model, and quick integration with Supabase and OpenAI SDK/HTTP.
- Database: Supabase Postgres provides hosted Postgres, Row Level Security, and convenient JS client. It also handles authentication automatically, allowing for a faster app development.
- Alternatives considered: FastAPI/Flask were attractive for their Python strengths (typed validation, ML/data ecosystem, rapid prototyping). For QuickMap, we selected Node/Express to keep a single-language stack, maximize developer velocity with React, and simplify integration with frontend-first services.

### API Design Philosophy

- Endpoint structure: Resource‑oriented REST under `/ai` with nouns and predictable verbs:
  - POST `/ai/complete` → create plan from AI response and persist nested data
  - GET `/ai/plans` | GET `/ai/plans/:id` | GET `/ai/plans/latest`
  - POST `/ai/plans/:id/milestones`, PUT/DELETE `/ai/milestones/:id`
  - POST `/ai/milestones/:id/steps`, PUT/DELETE `/ai/steps/:id`
  - POST `/ai/steps/:id/resources`, PUT/DELETE `/ai/resources/:id`
  - Public browsing: GET `/ai/plans/public`, GET `/ai/plans/public/:id`
  - Bookmarks & progress: POST/DELETE `/ai/public/plans/:id/bookmark`, GET `/ai/bookmarks`, GET/POST `/ai/public/plans/:id/progress`
- External API integration: OpenAI Chat Completions generates a strict JSON roadmap. The backend validates/parses JSON, then persists to Postgres.
- Failure handling & rate limits: The server checks inputs, catches JSON errors, and returns clear error messages.
- Auth: Supabase Auth is used. Logged-in users can only access their own data, while public plans can be viewed by anyone.

### Performance & Scalability

- Load handling: The backend doesn’t store state, so it can be scaled easily. Supabase handles database growth, and the frontend is delivered through a CDN.
- Bottlenecks: Waiting for OpenAI’s response and saving many items (milestones/steps) at once.
- Optimizations: Save items in batches, use database indexes for faster lookups.

## 3) Integration Strategy

- API selection: OpenAI chosen for rapid high‑quality content generation and structured JSON via `response_format: json_object`.
- Error handling: Validate inputs, enforce required fields, handle OpenAI/network errors with status propagation, and fall back with actionable error messages.
- Security: Store secrets in environment variables. Use HttpOnly cookies for session. Enforce CORS allowlist, `sameSite` and `secure` where applicable. Supabase RLS for server‑side protections (when enabled).

## Critical Thinking Highlights

- API design decisions: REST resources map directly to domain objects. Write endpoints enforce ownership via joined selects.
- Integration choices: OpenAI for generation; Supabase for auth/data to avoid building user management and to leverage Postgres.
- Performance tradeoffs: Prioritized delivery speed and clarity over maximum throughput; left hooks for caching and rate limiting.

## Optional Advanced Features (Ideas)

- Build rate limiting and usage analytics middleware.
- Caching for faster response.
- Enrollment system, where users are able to enroll/bookmark a study by entering a code.
- Private and public option for study plan.
- Classroom implementations.

## Submission Checklist

1. GitHub Repository

- Clear structure for `backend/` and `frontend/`. `package.json` files list all dependencies.
- README (this file) with overview and setup.
- Sample requests available via Postman collection in `backend/`.
https://github.com/MDAnandaB35/study-planner

2. Working Demo

- Deployed backend (Railway), frontend (Netlify). https://quickmap-learn.netlify.app/


3. Technical Documentation

- Architecture overview (above), technology choices, and critical analysis sections included here.

## Postman

Use `backend/Supabase_Auth_Backend.postman_collection.json` with the environment file.

## Notes & Ops

- Update `FRONTEND_URL` to match deployment origin. Ensure HTTPS and `secure` cookies in production.
- After registering, users see a pop‑up prompting them to verify their email.

## API Endpoints (with examples)

Base URL (local): `http://localhost:3001`

Auth

- POST `/auth/signup` – Create account

  - Body example:
    ```json
    { "email": "user@example.com", "password": "StrongPass123!" }
    ```
  - Success response:
    ```json
    {
      "message": "User created successfully",
      "user": { "id": "..." },
      "success": true
    }
    ```

- POST `/auth/login` – Sign in, sets HttpOnly cookie

  - Body example:
    ```json
    { "email": "user@example.com", "password": "StrongPass123!" }
    ```
  - Success response (cookie set):
    ```json
    {
      "message": "Login successful",
      "session": { "access_token": "..." },
      "user": { "id": "..." },
      "success": true
    }
    ```

- GET `/auth/me` – Get current user (cookie required)

  - Response example:
    ```json
    { "user": { "id": "...", "email": "user@example.com" }, "success": true }
    ```

- POST `/auth/logout` – Clear session cookie
  - Response example:
    ```json
    { "message": "Logged out successfully", "success": true }
    ```

AI / Plans (all require auth cookie)

- POST `/ai/complete` – Generate a plan via OpenAI and persist

  - Body example:
    ```json
    { "focus": "Learn React", "outcome": "Build a production app" }
    ```
  - Success response:
    ```json
    { "success": true, "planId": "...", "title": "React Learning Roadmap" }
    ```

- GET `/ai/plans` – List user’s plans (summary)

  - Response example:
    ```json
    {
      "success": true,
      "plans": [{ "id": "...", "title": "...", "created_at": "..." }]
    }
    ```

- GET `/ai/plans/latest` – Latest plan with nested data

  - Response example (truncated):
    ```json
    {
      "success": true,
      "plan": {
        "id": "...",
        "title": "...",
        "milestones": [
          {
            "id": "...",
            "steps": [{ "id": "...", "resources": [{ "id": "..." }] }]
          }
        ]
      }
    }
    ```

- GET `/ai/plans/:id` – Fetch plan by id with nested data (must belong to user)

  - Response example: same shape as `latest`.

- PUT `/ai/plans/:id` – Update plan basics

  - Body example:
    ```json
    {
      "title": "New Title",
      "focus": "...",
      "outcome": "...",
      "estimated_duration_weeks": 8
    }
    ```
  - Response example:
    ```json
    { "success": true, "plan": { "id": "...", "title": "New Title" } }
    ```

- DELETE `/ai/plans/:id` – Delete plan (cascade removes related rows)
  - Response example:
    ```json
    { "success": true, "message": "Plan deleted successfully" }
    ```

Milestones

- POST `/ai/plans/:id/milestones`

  - Body example:
    ```json
    {
      "title": "Foundations",
      "description": "Basics",
      "estimated_duration": "2 weeks"
    }
    ```
  - Response example:
    ```json
    { "success": true, "milestone": { "id": "...", "order_index": 0 } }
    ```

- PUT `/ai/milestones/:id` | DELETE `/ai/milestones/:id`
  - Update body example:
    ```json
    { "title": "Updated", "description": "..." }
    ```

Steps

- POST `/ai/milestones/:id/steps`

  - Body example:
    ```json
    { "title": "Read Docs", "description": "react.dev" }
    ```
  - Response example:
    ```json
    { "success": true, "step": { "id": "...", "order_index": 0 } }
    ```

- PUT `/ai/steps/:id` | DELETE `/ai/steps/:id`

Resources

- POST `/ai/steps/:id/resources`

  - Body example:
    ```json
    { "type": "link", "title": "React Docs", "url": "https://react.dev" }
    ```
  - Response example:
    ```json
    { "success": true, "resource": { "id": "...", "type": "link" } }
    ```

- PUT `/ai/resources/:id` | DELETE `/ai/resources/:id`

Public & Social

- GET `/ai/plans/public` – List other users’ plans (no author emails exposed)
- GET `/ai/plans/public/:id` – Read‑only public plan detail
- POST `/ai/public/plans/:id/bookmark` | DELETE `/ai/public/plans/:id/bookmark`
  - Bookmark response example:
    ```json
    { "success": true, "bookmark": { "plan_id": "..." } }
    ```
- GET `/ai/bookmarks` – List bookmarks with simple progress summary
  - Response example (truncated):
    ```json
    {
      "success": true,
      "plans": [{ "id": "...", "progress": { "completed": 2, "total": 5 } }]
    }
    ```
- GET `/ai/public/plans/:id/progress` | POST `/ai/public/plans/:id/progress`
  - POST body example:
    ```json
    { "milestone_id": "...", "completed": true }
    ```
  - Response example:
    ```json
    {
      "success": true,
      "progress": { "plan_id": "...", "milestone_id": "...", "completed": true }
    }
    ```
